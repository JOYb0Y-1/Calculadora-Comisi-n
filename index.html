<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AFP Integra â€” Calculadora de Comisiones</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“Š</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: #F1F5F9; font-family: 'Plus Jakarta Sans', sans-serif; }
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: #F8FAFC; }
    ::-webkit-scrollbar-thumb { background: #CBD5E1; border-radius: 3px; }
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
    input[type=number] { -moz-appearance: textfield; }
    @keyframes fadeUp { from { opacity:0; transform:translateY(12px); } to { opacity:1; transform:translateY(0); } }
    .fade-up { animation: fadeUp 0.5s cubic-bezier(0.4,0,0.2,1) both; }
    button { font-family: inherit; }
    button:hover { opacity: 0.88; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useMemo } = React;

    /* â”€â”€ Constants â”€â”€ */
    const TIERS = [
      { min: 5000, max: 8999, flujo: 0.06, saldo: 0.03, label: "Rango I" },
      { min: 9000, max: 12000, flujo: 0.07, saldo: 0.035, label: "Rango II" },
      { min: 12001, max: Infinity, flujo: 0.08, saldo: 0.04, label: "Rango III" },
    ];
    const BONUS_THRESHOLD = 70000;
    const BONUS_AMOUNT = 1000;
    const META_ASESOR = 130000;

    /* â”€â”€ Icon (Material Icons font) â”€â”€ */
    function Icon({ name, size = 20, color = "currentColor", style = {} }) {
      return <span className="material-icons-outlined" style={{ fontSize: size, color, verticalAlign: "middle", lineHeight: 1, ...style }}>{name}</span>;
    }

    /* â”€â”€ Helpers â”€â”€ */
    function fmt(n) {
      return n.toLocaleString("es-PE", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    function calculateForTarget(target, lockedTier, type) {
      const tiersToCalc = lockedTier !== null ? [lockedTier] : [0, 1, 2];
      return tiersToCalc.map((ti) => {
        const tier = TIERS[ti];
        const rate = type === "flujo" ? tier.flujo : tier.saldo;
        const range = tier.max === Infinity ? 8000 : tier.max - tier.min;
        const base = tier.min;
        let remaining = target, total = 0, bonus = false;
        const clients = [];
        let i = 0;
        while (remaining > 0 && i < 300) {
          const noise = Math.sin(i * 3.7 + ti * 2.1) * 0.35 + 0.5;
          const tv = Math.max(tier.min, Math.round((base + range * noise) / 100) * 100);
          const c = tv * rate;
          total += tv;
          clients.push({ transfer: tv, commission: c });
          remaining -= c;
          if (!bonus && type === "flujo" && total >= BONUS_THRESHOLD) {
            remaining -= BONUS_AMOUNT;
            bonus = true;
          }
          i++;
        }
        const totalComm = clients.reduce((s, c) => s + c.commission, 0) + (bonus ? BONUS_AMOUNT : 0);
        return { tierIndex: ti, tier, rate, clients, totalTransfer: total, totalCommission: totalComm, bonusApplied: bonus, metaPercent: (total / META_ASESOR) * 100, type };
      });
    }

    /* â”€â”€ Tier Badge â”€â”€ */
    const TIER_COLORS = [
      { bg: "#FFF8F0", text: "#B45309", border: "#F59E0B40" },
      { bg: "#F0FDF4", text: "#166534", border: "#22C55E40" },
      { bg: "#EFF6FF", text: "#1E40AF", border: "#3B82F640" },
    ];
    function TierBadge({ tier, compact }) {
      const c = TIER_COLORS[tier];
      return <span style={{ display: "inline-flex", alignItems: "center", gap: 4, padding: compact ? "2px 8px" : "4px 12px", borderRadius: 6, fontSize: compact ? 10 : 11, fontWeight: 700, color: c.text, background: c.bg, border: `1.5px solid ${c.border}`, letterSpacing: "0.04em", whiteSpace: "nowrap" }}>{TIERS[tier].label}</span>;
    }

    /* â”€â”€ Stat â”€â”€ */
    function Stat({ icon, label, value, accent, mono }) {
      return (
        <div style={{ textAlign: "center", padding: "12px 8px" }}>
          <div style={{ marginBottom: 6 }}><Icon name={icon} size={18} color="#94A3B8" /></div>
          <div style={{ fontSize: 20, fontWeight: 800, color: accent || "#0F172A", fontFamily: mono ? "'JetBrains Mono', monospace" : "inherit", letterSpacing: "-0.02em", lineHeight: 1.2 }}>{value}</div>
          <div style={{ fontSize: 10, fontWeight: 600, color: "#94A3B8", textTransform: "uppercase", letterSpacing: "0.1em", marginTop: 4 }}>{label}</div>
        </div>
      );
    }

    /* â”€â”€ Result Card â”€â”€ */
    function ResultCard({ data }) {
      const [open, setOpen] = useState(false);
      const accent = ["#D97706", "#16A34A", "#2563EB"][data.tierIndex];
      const accentBg = ["#FFFBEB", "#F0FDF4", "#EFF6FF"][data.tierIndex];
      return (
        <div style={{ background: "#fff", borderRadius: 12, border: "1px solid #E2E8F0", overflow: "hidden", boxShadow: "0 1px 3px rgba(15,23,42,0.04)" }}>
          <div style={{ padding: "16px 20px", borderBottom: "1px solid #F1F5F9", display: "flex", alignItems: "center", justifyContent: "space-between", background: accentBg, flexWrap: "wrap", gap: 8 }}>
            <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
              <TierBadge tier={data.tierIndex} />
              <span style={{ fontSize: 12, color: "#64748B", fontWeight: 500 }}>S/ {fmt(data.tier.min)} â€“ {data.tier.max === Infinity ? "a mÃ¡s" : `S/ ${fmt(data.tier.max)}`}</span>
            </div>
            <div style={{ fontSize: 12, fontWeight: 700, color: accent, background: `${accent}12`, padding: "4px 10px", borderRadius: 6 }}>
              {data.type === "flujo" ? `${(data.rate*100).toFixed(0)}%` : `${(data.rate*100).toFixed(1)}%`} {data.type === "flujo" ? "Flujo" : "Saldo"}
            </div>
          </div>
          <div style={{ padding: "16px 20px" }}>
            <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr 1fr", gap: 8, marginBottom: 16, background: "#F8FAFC", borderRadius: 10, padding: "4px 0" }}>
              <Stat icon="group" label="Clientes" value={data.clients.length} accent={accent} />
              <Stat icon="payments" label="ComisiÃ³n" value={`S/ ${fmt(data.totalCommission)}`} accent={accent} mono />
              <Stat icon="account_balance_wallet" label="Traspaso" value={`S/ ${fmt(data.totalTransfer)}`} mono />
            </div>
            <div style={{ marginBottom: 14 }}>
              <div style={{ display: "flex", justifyContent: "space-between", marginBottom: 5 }}>
                <span style={{ fontSize: 11, fontWeight: 600, color: "#64748B", display: "flex", alignItems: "center", gap: 4 }}><Icon name="flag" size={14} color="#94A3B8" /> Meta S/ {fmt(META_ASESOR)}</span>
                <span style={{ fontSize: 11, fontWeight: 700, color: data.metaPercent >= 100 ? "#16A34A" : "#D97706" }}>{data.metaPercent.toFixed(1)}%</span>
              </div>
              <div style={{ height: 6, background: "#F1F5F9", borderRadius: 3, overflow: "hidden" }}>
                <div style={{ height: "100%", width: `${Math.min(data.metaPercent, 100)}%`, background: data.metaPercent >= 100 ? "linear-gradient(90deg, #16A34A, #4ADE80)" : `linear-gradient(90deg, ${accent}, ${accent}BB)`, borderRadius: 3, transition: "width 0.6s ease" }} />
              </div>
            </div>
            {data.bonusApplied && (
              <div style={{ background: "#FFFBEB", border: "1px solid #FDE68A", borderRadius: 8, padding: "10px 14px", display: "flex", alignItems: "center", gap: 10, marginBottom: 14 }}>
                <Icon name="emoji_events" size={20} color="#D97706" />
                <span style={{ fontSize: 12, fontWeight: 600, color: "#92400E" }}>Bono de S/ {fmt(BONUS_AMOUNT)} aplicado â€” traspaso flujo superÃ³ S/ {fmt(BONUS_THRESHOLD)}</span>
              </div>
            )}
            <button onClick={() => setOpen(!open)} style={{ width: "100%", padding: 10, background: open ? "#F8FAFC" : "#fff", border: "1px solid #E2E8F0", borderRadius: 8, cursor: "pointer", fontSize: 12, fontWeight: 600, color: "#64748B", display: "flex", alignItems: "center", justifyContent: "center", gap: 6 }}>
              <Icon name={open ? "expand_less" : "expand_more"} size={18} color="#94A3B8" />
              {open ? "Ocultar detalle" : "Ver detalle por cliente"} ({data.clients.length})
            </button>
            {open && (
              <div style={{ marginTop: 12, maxHeight: 320, overflowY: "auto", borderRadius: 8, border: "1px solid #F1F5F9" }}>
                <table style={{ width: "100%", borderCollapse: "collapse", fontSize: 12 }}>
                  <thead><tr style={{ background: "#F8FAFC" }}>
                    <th style={{ padding: "10px 12px", textAlign: "left", color: "#94A3B8", fontWeight: 700, fontSize: 10, textTransform: "uppercase", letterSpacing: "0.08em" }}>NÂ°</th>
                    <th style={{ padding: "10px 12px", textAlign: "right", color: "#94A3B8", fontWeight: 700, fontSize: 10, textTransform: "uppercase", letterSpacing: "0.08em" }}>Traspaso RIA</th>
                    <th style={{ padding: "10px 12px", textAlign: "right", color: "#94A3B8", fontWeight: 700, fontSize: 10, textTransform: "uppercase", letterSpacing: "0.08em" }}>ComisiÃ³n</th>
                  </tr></thead>
                  <tbody>
                    {data.clients.map((c, i) => (
                      <tr key={i} style={{ borderTop: "1px solid #F8FAFC" }}>
                        <td style={{ padding: "8px 12px", color: "#CBD5E1", fontWeight: 600, fontFamily: "'JetBrains Mono', monospace", fontSize: 11 }}>{String(i+1).padStart(2,"0")}</td>
                        <td style={{ padding: "8px 12px", textAlign: "right", fontWeight: 600, color: "#334155", fontFamily: "'JetBrains Mono', monospace", fontSize: 11 }}>S/ {fmt(c.transfer)}</td>
                        <td style={{ padding: "8px 12px", textAlign: "right", fontWeight: 700, color: accent, fontFamily: "'JetBrains Mono', monospace", fontSize: 11 }}>S/ {fmt(c.commission)}</td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            )}
          </div>
        </div>
      );
    }

    /* â”€â”€ Comparison â”€â”€ */
    function ComparisonTable({ target, lockedTier }) {
      const flujo = calculateForTarget(target, lockedTier, "flujo");
      const saldo = calculateForTarget(target, lockedTier, "saldo");
      return (
        <div>
          <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 16 }}>
            <Icon name="compare_arrows" size={22} color="#0F172A" />
            <h3 style={{ fontSize: 15, fontWeight: 800, color: "#0F172A", margin: 0 }}>ComparaciÃ³n Flujo vs Saldo</h3>
          </div>
          <div style={{ overflowX: "auto" }}>
            <table style={{ width: "100%", borderCollapse: "collapse", fontSize: 12, minWidth: 600 }}>
              <thead>
                <tr>
                  <th style={{ padding: "12px 14px", textAlign: "left", fontSize: 10, fontWeight: 700, color: "#94A3B8", textTransform: "uppercase", letterSpacing: "0.08em", background: "#F8FAFC", borderBottom: "2px solid #E2E8F0" }}>Rango</th>
                  <th colSpan={3} style={{ padding: "12px 14px", textAlign: "center", fontSize: 10, fontWeight: 700, color: "#D97706", textTransform: "uppercase", letterSpacing: "0.08em", background: "#FFFBEB", borderBottom: "2px solid #FDE68A" }}>
                    <span style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 4 }}><Icon name="trending_up" size={14} color="#D97706" /> ComisiÃ³n Flujo</span>
                  </th>
                  <th colSpan={3} style={{ padding: "12px 14px", textAlign: "center", fontSize: 10, fontWeight: 700, color: "#2563EB", textTransform: "uppercase", letterSpacing: "0.08em", background: "#EFF6FF", borderBottom: "2px solid #BFDBFE" }}>
                    <span style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 4 }}><Icon name="savings" size={14} color="#2563EB" /> ComisiÃ³n Saldo</span>
                  </th>
                </tr>
                <tr style={{ borderBottom: "1px solid #E2E8F0" }}>
                  <th style={{ padding: "8px 14px" }} />
                  {["Tasa","Clientes","Total"].map(h => <th key={`f-${h}`} style={{ padding: "8px 10px", textAlign: "center", fontSize: 10, color: "#94A3B8", fontWeight: 600 }}>{h}</th>)}
                  {["Tasa","Clientes","Total"].map(h => <th key={`s-${h}`} style={{ padding: "8px 10px", textAlign: "center", fontSize: 10, color: "#94A3B8", fontWeight: 600 }}>{h}</th>)}
                </tr>
              </thead>
              <tbody>
                {flujo.map((fr, i) => {
                  const sr = saldo[i];
                  return (
                    <tr key={i} style={{ borderBottom: "1px solid #F1F5F9" }}>
                      <td style={{ padding: "12px 14px" }}><TierBadge tier={fr.tierIndex} compact /></td>
                      <td style={{ padding: "12px 10px", textAlign: "center", fontWeight: 700, color: "#D97706", fontSize: 13 }}>{(fr.rate*100).toFixed(0)}%</td>
                      <td style={{ padding: "12px 10px", textAlign: "center", fontWeight: 800, fontSize: 18, color: "#0F172A", fontFamily: "'JetBrains Mono', monospace" }}>{fr.clients.length}</td>
                      <td style={{ padding: "12px 10px", textAlign: "center", fontWeight: 600, color: "#334155", fontFamily: "'JetBrains Mono', monospace", fontSize: 11 }}>S/ {fmt(fr.totalCommission)}</td>
                      <td style={{ padding: "12px 10px", textAlign: "center", fontWeight: 700, color: "#2563EB", fontSize: 13 }}>{(sr.rate*100).toFixed(1)}%</td>
                      <td style={{ padding: "12px 10px", textAlign: "center", fontWeight: 800, fontSize: 18, color: "#0F172A", fontFamily: "'JetBrains Mono', monospace" }}>{sr.clients.length}</td>
                      <td style={{ padding: "12px 10px", textAlign: "center", fontWeight: 600, color: "#334155", fontFamily: "'JetBrains Mono', monospace", fontSize: 11 }}>S/ {fmt(sr.totalCommission)}</td>
                    </tr>
                  );
                })}
              </tbody>
            </table>
          </div>
        </div>
      );
    }

    /* â”€â”€ Main App â”€â”€ */
    function App() {
      const [target, setTarget] = useState(10000);
      const [lockedTier, setLockedTier] = useState(null);
      const [commType, setCommType] = useState("flujo");
      const results = useMemo(() => calculateForTarget(target, lockedTier, commType), [target, lockedTier, commType]);

      return (
        <div style={{ minHeight: "100vh" }}>
          {/* Header */}
          <header style={{ background: "#0F172A", color: "#fff", position: "relative", overflow: "hidden" }}>
            <div style={{ position: "absolute", top: 0, right: 0, width: "40%", height: "100%", background: "linear-gradient(135deg, transparent 50%, rgba(59,130,246,0.06) 50%)" }} />
            <div style={{ position: "absolute", top: 0, right: "10%", width: "20%", height: "100%", background: "linear-gradient(135deg, transparent 60%, rgba(250,204,21,0.04) 60%)" }} />
            <div style={{ position: "relative", maxWidth: 960, margin: "0 auto", padding: "24px 24px 20px" }}>
              <div style={{ display: "flex", alignItems: "center", justifyContent: "space-between", flexWrap: "wrap", gap: 12 }}>
                <div style={{ display: "flex", alignItems: "center", gap: 14 }}>
                  <div style={{ width: 40, height: 40, background: "linear-gradient(135deg, #3B82F6, #1D4ED8)", borderRadius: 10, display: "flex", alignItems: "center", justifyContent: "center" }}>
                    <Icon name="analytics" size={22} color="#fff" />
                  </div>
                  <div>
                    <div style={{ fontSize: 10, fontWeight: 700, letterSpacing: "0.18em", color: "#64748B", textTransform: "uppercase" }}>AFP Integra</div>
                    <div style={{ fontSize: 18, fontWeight: 900, letterSpacing: "-0.02em", lineHeight: 1.2 }}>Calculadora de Comisiones</div>
                  </div>
                </div>
                <div style={{ display: "flex", alignItems: "center", gap: 6, padding: "6px 14px", background: "rgba(255,255,255,0.06)", borderRadius: 8, border: "1px solid rgba(255,255,255,0.08)" }}>
                  <Icon name="verified_user" size={16} color="#3B82F6" />
                  <span style={{ fontSize: 11, fontWeight: 600, color: "#94A3B8" }}>Uso exclusivo gerencia</span>
                </div>
              </div>
            </div>
          </header>

          <main style={{ maxWidth: 960, margin: "0 auto", padding: "24px 16px 48px" }}>
            {/* Input Panel */}
            <div className="fade-up" style={{ background: "#fff", borderRadius: 14, border: "1px solid #E2E8F0", overflow: "hidden", marginBottom: 24, boxShadow: "0 1px 3px rgba(15,23,42,0.04)" }}>
              <div style={{ padding: "16px 24px", borderBottom: "1px solid #F1F5F9", display: "flex", alignItems: "center", gap: 10 }}>
                <Icon name="tune" size={20} color="#0F172A" />
                <h2 style={{ fontSize: 14, fontWeight: 800, color: "#0F172A", margin: 0 }}>ParÃ¡metros de SimulaciÃ³n</h2>
              </div>
              <div style={{ padding: 24 }}>
                <div style={{ marginBottom: 24 }}>
                  <label style={{ fontSize: 11, fontWeight: 700, color: "#94A3B8", textTransform: "uppercase", letterSpacing: "0.1em", display: "flex", alignItems: "center", gap: 6, marginBottom: 10 }}>
                    <Icon name="track_changes" size={14} color="#94A3B8" /> Meta de comisiÃ³n del asesor
                  </label>
                  <div style={{ position: "relative", marginBottom: 10 }}>
                    <span style={{ position: "absolute", left: 16, top: "50%", transform: "translateY(-50%)", fontSize: 15, fontWeight: 700, color: "#94A3B8", fontFamily: "'JetBrains Mono', monospace" }}>S/</span>
                    <input type="number" value={target} onChange={(e) => setTarget(Math.max(0, Number(e.target.value)))}
                      style={{ width: "100%", padding: "16px 16px 16px 50px", fontSize: 28, fontWeight: 800, fontFamily: "'JetBrains Mono', monospace", border: "2px solid #E2E8F0", borderRadius: 10, outline: "none", color: "#0F172A", background: "#F8FAFC", transition: "border-color 0.2s, box-shadow 0.2s" }}
                      onFocus={(e) => { e.target.style.borderColor = "#3B82F6"; e.target.style.boxShadow = "0 0 0 3px rgba(59,130,246,0.1)"; }}
                      onBlur={(e) => { e.target.style.borderColor = "#E2E8F0"; e.target.style.boxShadow = "none"; }} />
                  </div>
                  <div style={{ display: "flex", gap: 6, flexWrap: "wrap" }}>
                    {[3000,5000,8000,10000,15000,20000].map(a => (
                      <button key={a} onClick={() => setTarget(a)} style={{ padding: "7px 16px", fontSize: 12, fontWeight: 700, fontFamily: "'JetBrains Mono', monospace", border: target===a ? "2px solid #3B82F6" : "1.5px solid #E2E8F0", borderRadius: 8, background: target===a ? "#EFF6FF" : "#fff", color: target===a ? "#1D4ED8" : "#64748B", cursor: "pointer", transition: "all 0.15s" }}>
                        {a.toLocaleString()}
                      </button>
                    ))}
                  </div>
                </div>

                <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 20 }}>
                  <div>
                    <label style={{ fontSize: 11, fontWeight: 700, color: "#94A3B8", textTransform: "uppercase", letterSpacing: "0.1em", display: "flex", alignItems: "center", gap: 6, marginBottom: 10 }}>
                      <Icon name="swap_horiz" size={14} color="#94A3B8" /> Tipo de comisiÃ³n
                    </label>
                    <div style={{ display: "flex", background: "#F1F5F9", borderRadius: 10, padding: 3, border: "1px solid #E2E8F0" }}>
                      {[{key:"flujo",label:"Flujo",icon:"trending_up"},{key:"saldo",label:"Saldo",icon:"savings"}].map(t => (
                        <button key={t.key} onClick={() => setCommType(t.key)} style={{ flex:1, padding: "10px 12px", fontSize: 13, fontWeight: 700, border: "none", borderRadius: 8, background: commType===t.key ? "#0F172A" : "transparent", color: commType===t.key ? "#fff" : "#64748B", cursor: "pointer", transition: "all 0.2s", display: "flex", alignItems: "center", justifyContent: "center", gap: 6 }}>
                          <Icon name={t.icon} size={16} color={commType===t.key ? "#fff" : "#94A3B8"} /> {t.label}
                        </button>
                      ))}
                    </div>
                  </div>
                  <div>
                    <label style={{ fontSize: 11, fontWeight: 700, color: "#94A3B8", textTransform: "uppercase", letterSpacing: "0.1em", display: "flex", alignItems: "center", gap: 6, marginBottom: 10 }}>
                      <Icon name="filter_list" size={14} color="#94A3B8" /> Rango especÃ­fico
                    </label>
                    <div style={{ display: "flex", gap: 6 }}>
                      {[{val:null,label:"Todos"},{val:0,label:"I"},{val:1,label:"II"},{val:2,label:"III"}].map(opt => (
                        <button key={String(opt.val)} onClick={() => setLockedTier(opt.val)} style={{ flex:1, padding: "10px 6px", fontSize: 12, fontWeight: 700, border: lockedTier===opt.val ? "2px solid #0F172A" : "1.5px solid #E2E8F0", borderRadius: 8, background: lockedTier===opt.val ? "#0F172A" : "#fff", color: lockedTier===opt.val ? "#fff" : "#64748B", cursor: "pointer", transition: "all 0.15s" }}>
                          {opt.label}
                        </button>
                      ))}
                    </div>
                  </div>
                </div>
              </div>

              {/* Reference */}
              <div style={{ padding: "16px 24px 20px", background: "#F8FAFC", borderTop: "1px solid #F1F5F9" }}>
                <div style={{ fontSize: 10, fontWeight: 700, color: "#94A3B8", textTransform: "uppercase", letterSpacing: "0.1em", marginBottom: 12, display: "flex", alignItems: "center", gap: 6 }}>
                  <Icon name="info" size={14} color="#94A3B8" /> Referencia de tasas por rango
                </div>
                <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr 1fr", gap: 10 }}>
                  {TIERS.map((t, i) => (
                    <div key={i} style={{ background: "#fff", borderRadius: 8, padding: "12px 14px", border: "1px solid #E2E8F0", textAlign: "center" }}>
                      <TierBadge tier={i} compact />
                      <div style={{ marginTop: 6, fontSize: 11, color: "#94A3B8", fontWeight: 500 }}>S/ {fmt(t.min)} â€“ {t.max === Infinity ? "a mÃ¡s" : `S/ ${fmt(t.max)}`}</div>
                      <div style={{ marginTop: 6, display: "flex", justifyContent: "center", gap: 12, alignItems: "center" }}>
                        <div>
                          <div style={{ fontSize: 15, fontWeight: 800, color: "#D97706" }}>{(t.flujo*100).toFixed(0)}%</div>
                          <div style={{ fontSize: 9, color: "#94A3B8", fontWeight: 600 }}>Flujo</div>
                        </div>
                        <div style={{ width: 1, height: 24, background: "#E2E8F0" }} />
                        <div>
                          <div style={{ fontSize: 15, fontWeight: 800, color: "#2563EB" }}>{(t.saldo*100).toFixed(1)}%</div>
                          <div style={{ fontSize: 9, color: "#94A3B8", fontWeight: 600 }}>Saldo</div>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>

            {/* Results */}
            <div className="fade-up" style={{ animationDelay: "0.1s" }}>
              <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 6 }}>
                <Icon name="assessment" size={22} color="#0F172A" />
                <h2 style={{ fontSize: 15, fontWeight: 800, color: "#0F172A", margin: 0 }}>Resultados â€” ComisiÃ³n {commType === "flujo" ? "Flujo" : "Saldo"}</h2>
              </div>
              <p style={{ fontSize: 12, color: "#94A3B8", marginBottom: 16, fontWeight: 500, paddingLeft: 30 }}>Montos de traspaso simulados con variaciÃ³n realista dentro de cada rango</p>
              <div style={{ display: "grid", gridTemplateColumns: results.length === 1 ? "1fr" : "repeat(auto-fit, minmax(290px, 1fr))", gap: 16, marginBottom: 28 }}>
                {results.map(r => <ResultCard key={`${r.tierIndex}-${commType}-${target}`} data={r} />)}
              </div>
            </div>

            {/* Comparison */}
            <div className="fade-up" style={{ animationDelay: "0.2s", background: "#fff", borderRadius: 14, padding: 24, border: "1px solid #E2E8F0", boxShadow: "0 1px 3px rgba(15,23,42,0.04)", marginBottom: 24 }}>
              <ComparisonTable target={target} lockedTier={lockedTier} />
            </div>

            {/* Footer */}
            <div style={{ display: "flex", alignItems: "flex-start", gap: 10, padding: "16px 20px", background: "#fff", borderRadius: 10, border: "1px solid #E2E8F0" }}>
              <Icon name="info" size={18} color="#94A3B8" style={{ marginTop: 1, flexShrink: 0 }} />
              <div style={{ fontSize: 11, color: "#64748B", lineHeight: 1.7 }}>
                <strong style={{ color: "#0F172A" }}>Nota:</strong> Los montos por cliente son simulados con variaciÃ³n realista dentro de cada rango.
                El bono de S/ {fmt(BONUS_AMOUNT)} se aplica cuando el traspaso total en flujo alcanza S/ {fmt(BONUS_THRESHOLD)}.
                La meta por asesor es de S/ {fmt(META_ASESOR)}. Herramienta de uso interno â€” AFP Integra.
              </div>
            </div>
          </main>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>